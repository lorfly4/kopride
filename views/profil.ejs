<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <title>Profil KO-PRIDE</title>
    <style>
      body {
        background-color: #f8f9fa;
      }
      .profile-container {
        margin-top: 20px;
        padding: 20px;
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .profile-photo {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        object-fit: cover;
        cursor: pointer;
        border: 2px solid #007bff;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
        <a class="navbar-brand" href="/landing">KO-PRIDE</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNavAltMarkup"
          aria-controls="navbarNavAltMarkup"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <div class="navbar-nav">
            <a class="nav-link active" aria-current="page" href="/landing"
              >Home</a
            >
            <a class="nav-link" href="/profil">Profil</a>
            <a class="nav-link" href="/peminjaman">Peminjaman</a>
          </div>
          <div class="ms-auto">
            <a class="nav-link" href="/login">Logout</a>
          </div>
        </div>
      </div>
    </nav>

    <div class="container profile-container">
      <h2>Profil Pengguna</h2>
      <form>
        <div class="mb-3">
          <label for="nomorKeanggotaan" class="form-label"
            >Nomor Keanggotaan</label
          >
          <input
            type="text"
            class="form-control"
            id="nomorKeanggotaan"
            value="<%= users.nomor_keanggotaan %>"
            disabled
          />
        </div>
        <div class="mb-3">
          <label for="nama" class="form-label">Nama</label>
          <input
            type="text"
            class="form-control"
            id="nama"
            placeholder="Masukkan nama"
            name="nama"
            value="<%= users.nama %>"
          />
        </div>
        <div class="mb-3">
          <label for="divisi" class="form-label">Divisi</label>
          <input
            type="text"
            class="form-control"
            id="divisi"
            placeholder="Masukkan divisi"
            name="divisi"
            value="<%= users.divisi %>"
          />
        </div>
        <div class="mb-3">
          <label for="password" class="form-label">Password</label>
          <input
            type="password"
            class="form-control"
            id="password"
            placeholder="Masukkan password"
            name="password"
            value="<%= users.password %>"
          />
        </div>
        <div class="mb-3">
          <label class="form-label">Foto Profil</label>
          <div>
            <img
              id="avatar"
              class="profile-photo"
              src="<%= users.foto ? users.foto : '/img/avatar.png' %>"
              alt="<%= users.foto ? users.foto : 'Avatar' %>"
              onclick="document.getElementById('fotoInput').click();"
            />
            <input
              type="file"
              id="fotoInput"
              style="display: none"
              accept="img/*"
              name="foto"
            />
          </div>
        </div>
        <button type="submit" class="btn btn-primary">Simpan Perubahan</button>
      </form>
    </div>

    <script>
      // Preview foto
      document
        .getElementById("fotoInput")
        .addEventListener("change", function (event) {
          const file = event.target.files[0];
          const reader = new FileReader();

          reader.onload = function (e) {
            document.getElementById("avatar").src = e.target.result;
          };

          if (file) {
            reader.readAsDataURL(file);
          }
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
